<!DOCTYPE html> 
<html> 
    <head> 
        <link rel = "stylesheet" type = "text/css" href = "StyleSheet.css" />
        
        <script src="scripts/json.js"></script>
        <script>
            var request;
            function schedule() {
                // part 1: process info
                date = document.getElementById("uname").value;
                message = document.getElementById("uname").value;

                // part 2: POST to server
                var a1 = ["dogID", "date"];
                var a2 = [id, date];
                var payload = formatAsJSON(a1, a2);
                request = new XMLHttpRequest();
                request.open("POST", 'playdate_request', true);
                request.addEventListener("readystatechange", requestReceived, false);
                request.send(payload);
                return false;
            }

            function requestReceived() {
                if (request.readyState == 4 && request.status == 200) {
                    if (request.responseText != null) {
                        var data = JSON.parse(request.responseText);
                        if (data.status) {
                            alert("Scheduled the playdate!")
                            selfClose();
                        } else {
                            alert("Scheduling unsuccesful.");
                        }
                    } else {
                        alert("Something went wrong. Try again later.");
                    }
                }
            }
            
            function selfClose() {
                window.open("", "_self");
                window.close();
            }
        </script>
    </head>
    
    <body> 
        
        <div class="theme"> 
           <p style="font-weight: 700; font-size: 2em"> Schedule a playdate: </p>
            <br>
            <br>
            <form style="text-align: center" onsubmit="return schedule()"> 
                <input id="date" class="form" type="date">
                <br>
                <br>
                
                <textarea id="message" class="form" name="message" style="width:300px; height:300px">

                </textarea> 
            
                <br>
                <br>
                <input type="submit" value="Submit" class="form">
        
            </form>
        </div>
    
    </body>

</html>